<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ show.title }} Profile</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="{% static 'css/showprofile.css' %}">
    <script src="{% static 'js/sketch.js'%}" defer></script>
</head>
<body>

<!-- TV Show Profile Content -->
<div class="show-profile-info">
    <div class="background-div-left"></div>
    <div class="background-div-right"></div>

    <div class="background-image">
        <!-- Assume show.background_image_url contains the URL for the background image -->
        <img src="{{ show.background_image_url }}" alt="{{ show.title }} Background">
    </div>

    <!-- left div -->
    <div class="show-left">
        <div class="show-pic">
            <!-- Assume show.image_url contains the URL for the show's main image -->
            <img src="{{ show.image_url }}" alt="{{ show.title }}">
        </div>
        <div class="streaming-on">Streaming On:</div>

        <div class="streaming-sites">
            {% for service in show.streaming_services %}
            <a href="{{ service.url }}" target="_blank">
                <div class="streaming-placeholder">
                    <img src="{{ service.logo_url }}" alt="{{ service.name }}">
                </div>
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- right div -->
    <div class="show-right">
        <div class="title-year">
            <h1>{{ show.title }}</h1>
            <p>{{ show.year }}</p>
        </div>

        <div class="tvpg-genre">
            <div class="tvpg-rating">
                <p>{{ show.rating }}</p>
            </div>
            <div class="genre">
                <p>{{ show.genre }}</p>
            </div>
        </div>

        <div class="show-icons">
            <!-- Add dynamic icons if needed -->
        </div>

        <div class="show-description">
            <h3>Description</h3>
            <p>{{ show.description }}</p>
        </div>

        <div class="rotten-tomato">Rotten Tomato Score:</div>

        <div class="circle-wrap">
            <div class="outer">
                <div class="inner">
                    <div id="number"></div>
                </div>

                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="160px" height="160px">
                    <defs>
                        <linearGradient id="GradientColor">
                            <stop offset="0%" stop-color="#DA22FF" />
                            <stop offset="100%" stop-color="#9733EE" />
                        </linearGradient>
                    </defs>
                    <circle id="circle" cx="80" cy="80" r="49" stroke-linecap="round" />
                </svg>
            </div>
        </div>
    </div>
</div>

<!-- Episode content and cast info sections can also be dynamically generated -->

<script>
    function updateProgress(percentage) {
        let number = document.getElementById("number");
        let counter = 0;
        let interval;

        setInterval(() => {
            if(counter == percentage) {
                clearInterval(interval);
            }
            else {
                counter += 1;
                number.innerHTML = `${counter}%`;
            }
        }, 12);

        const circle = document.querySelector('circle');
        const circumference = parseFloat(circle.getAttribute('stroke-dasharray'));
        const offset = circumference * (1 - percentage / 100);
        circle.style.strokeDashoffset = offset;
    }

    // Get the circle element
    const circle = document.querySelector('.circle');

    // Update the custom property value dynamically
    function updateDashOffset(percentage) {
        const circumference = 307.86; // Adjust this value based on your circle's circumference
        const dashOffset = circumference - (circumference * percentage / 100); 
        document.documentElement.style.setProperty('--dash-offset', `${dashOffset}`);
    }

    var integer = 90;
    updateProgress(integer);
    updateDashOffset(integer); 
    
    /* Function to bring out seasons list *******************************************/
    var dropButton = document.querySelector(".drop-button");
    var icon = dropButton.querySelector("i");

    dropButton.addEventListener("click", function(event) {
        event.preventDefault(); // Prevent default link behavior
        document.querySelector(".dropdown ul").classList.toggle("active"); // Toggle the "active" class on the dropdown list

         // Toggle the chevron icon
    if (icon.classList.contains('bx-chevron-down')) {
        icon.classList.remove('bx-chevron-down');
        icon.classList.add('bx-chevron-up');
    } else {
        icon.classList.remove('bx-chevron-up');
        icon.classList.add('bx-chevron-down');
    }
    }); 

    

</script>

<style>
    
</style>

</body>
</html>
